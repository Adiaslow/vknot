const b=Math.PI,g=2*b,p=1e-6,C=g-p;function P(t){this._+=t[0];for(let i=1,e=t.length;i<e;++i)this._+=arguments[i]+t[i]}function q(t){let i=Math.floor(t);if(!(i>=0))throw new Error(`invalid digits: ${t}`);if(i>15)return P;const e=10**i;return function(n){this._+=n[0];for(let h=1,s=n.length;h<s;++h)this._+=Math.round(arguments[h]*e)/e+n[h]}}class j{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?P:q(i)}moveTo(i,e){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,e){this._append`L${this._x1=+i},${this._y1=+e}`}quadraticCurveTo(i,e,n,h){this._append`Q${+i},${+e},${this._x1=+n},${this._y1=+h}`}bezierCurveTo(i,e,n,h,s,r){this._append`C${+i},${+e},${+n},${+h},${this._x1=+s},${this._y1=+r}`}arcTo(i,e,n,h,s){if(i=+i,e=+e,n=+n,h=+h,s=+s,s<0)throw new Error(`negative radius: ${s}`);let r=this._x1,_=this._y1,o=n-i,u=h-e,a=r-i,f=_-e,l=a*a+f*f;if(this._x1===null)this._append`M${this._x1=i},${this._y1=e}`;else if(l>p)if(!(Math.abs(f*o-u*a)>p)||!s)this._append`L${this._x1=i},${this._y1=e}`;else{let c=n-r,x=h-_,v=o*o+u*u,A=c*c+x*x,m=Math.sqrt(v),w=Math.sqrt(l),T=s*Math.tan((b-Math.acos((v+l-A)/(2*m*w)))/2),M=T/w,E=T/m;Math.abs(M-1)>p&&this._append`L${i+M*a},${e+M*f}`,this._append`A${s},${s},0,0,${+(f*c>a*x)},${this._x1=i+E*o},${this._y1=e+E*u}`}}arc(i,e,n,h,s,r){if(i=+i,e=+e,n=+n,r=!!r,n<0)throw new Error(`negative radius: ${n}`);let _=n*Math.cos(h),o=n*Math.sin(h),u=i+_,a=e+o,f=1^r,l=r?h-s:s-h;this._x1===null?this._append`M${u},${a}`:(Math.abs(this._x1-u)>p||Math.abs(this._y1-a)>p)&&this._append`L${u},${a}`,n&&(l<0&&(l=l%g+g),l>C?this._append`A${n},${n},0,1,${f},${i-_},${e-o}A${n},${n},0,1,${f},${this._x1=u},${this._y1=a}`:l>p&&this._append`A${n},${n},0,${+(l>=b)},${f},${this._x1=i+n*Math.cos(s)},${this._y1=e+n*Math.sin(s)}`)}rect(i,e,n,h){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+e}h${n=+n}v${+h}h${-n}Z`}toString(){return this._}}function d(t){return function(){return t}}function z(t){let i=3;return t.digits=function(e){if(!arguments.length)return i;if(e==null)i=null;else{const n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);i=n}return t},()=>new j(i)}function R(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function S(t){this._context=t}S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function X(t){return new S(t)}function Z(t){return t[0]}function I(t){return t[1]}function O(t,i){var e=d(!0),n=null,h=X,s=null,r=z(_);t=typeof t=="function"?t:t===void 0?Z:d(t),i=typeof i=="function"?i:i===void 0?I:d(i);function _(o){var u,a=(o=R(o)).length,f,l=!1,c;for(n==null&&(s=h(c=r())),u=0;u<=a;++u)!(u<a&&e(f=o[u],u,o))===l&&((l=!l)?s.lineStart():s.lineEnd()),l&&s.point(+t(f,u,o),+i(f,u,o));if(c)return s=null,c+""||null}return _.x=function(o){return arguments.length?(t=typeof o=="function"?o:d(+o),_):t},_.y=function(o){return arguments.length?(i=typeof o=="function"?o:d(+o),_):i},_.defined=function(o){return arguments.length?(e=typeof o=="function"?o:d(!!o),_):e},_.curve=function(o){return arguments.length?(h=o,n!=null&&(s=h(n)),_):h},_.context=function(o){return arguments.length?(o==null?n=s=null:s=h(n=o),_):n},_}function k(t){return t<0?-1:1}function N(t,i,e){var n=t._x1-t._x0,h=i-t._x1,s=(t._y1-t._y0)/(n||h<0&&-0),r=(e-t._y1)/(h||n<0&&-0),_=(s*h+r*n)/(n+h);return(k(s)+k(r))*Math.min(Math.abs(s),Math.abs(r),.5*Math.abs(_))||0}function L(t,i){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-i)/2:i}function y(t,i,e){var n=t._x0,h=t._y0,s=t._x1,r=t._y1,_=(s-n)/3;t._context.bezierCurveTo(n+_,h+_*i,s-_,r-_*e,s,r)}function $(t){this._context=t}$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:y(this,this._t0,L(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var e=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,y(this,L(this,e=N(this,t,i)),e);break;default:y(this,this._t0,e=N(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=e}}};Object.create($.prototype).point=function(t,i){$.prototype.point.call(this,i,t)};function Q(t){return new $(t)}export{X as a,R as b,d as c,O as l,Q as m,z as w,Z as x,I as y};
