/**
 * Velvet Effect Styling - Complete Method Stack Implementation
 * Each layer builds progressively to create realistic velvet with glassmorphic overlay
 */

/* Remove default margins and ensure full coverage */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  outline: none !important;

  /* Prevent scroll bounce/overscroll */
  overscroll-behavior: none;
}

/* Lock HTML viewport - prevents overscroll bounce */
html {
  position: fixed;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  /* Background color set by JavaScript from BASE_COLOR_RGB */
}

/* Body becomes the scroll container */
body {
  width: 100%;
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* Hide scrollbar but keep scroll functionality */
body::-webkit-scrollbar {
  display: none;
  width: 0;
}

/* Firefox - hide scrollbar */
body {
  scrollbar-width: none;
  -ms-overflow-style: none;  /* IE and Edge */
}

/* Style navigation header - fixed to viewport (only direct child of body) */
body > header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  margin: 0;
  z-index: 50;
}

/* Add spacing after fixed header */
body > header + * {
  margin-top: calc(var(--header-height, 80px) + 2rem);
}

@layer components {

/* ============================================================================
   FOUNDATION LAYER - THE VELVET BASE
   Implements: Normal/Direction Maps, Procedural Noise, Base Texture
   ============================================================================ */

.velvet-background {
  position: relative;
  isolation: isolate;
  min-height: 100vh;

  /* Base background color set by JavaScript from BASE_COLOR_RGB */
  /* Three.js canvas will render sheep wool fur on top */
}

/* ============================================================================
   MATERIAL PROPERTIES LAYER
   Implements: Anisotropic Shading, Fresnel, Dual-Layer, Subsurface Scattering
   ============================================================================ */

/* Ensure content appears above background layers */
.velvet-background > * {
  position: relative;
  z-index: 1;
}

/* ============================================================================
   GLASSMORPHISM LAYER
   Implements: Backdrop Blur, Refraction, Edge Highlights, Surface Reflections
   ============================================================================ */

.card {
  position: relative;
  isolation: isolate;
  overflow: hidden;

  /* No background - layers handle the glass effect */
  background: transparent !important;

  /* Outer shadow - floating on wool */
  box-shadow:
    0 6px 12px rgba(0, 0, 0, 0.15),
    0 0 20px rgba(0, 0, 0, 0.08);

  /* Physics-based easing for natural motion */
  transition:
    transform 1.2s cubic-bezier(0.22, 0.61, 0.36, 1),
    box-shadow 1s cubic-bezier(0.22, 0.61, 0.36, 1);

  transform-origin: center center;
  will-change: transform, box-shadow;
}

/* Liquid Glass: Blur effect layer with glass distortion */
.card::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 0;
  border-radius: inherit;

  /* Light blur with tint - liquid glass effect */
  backdrop-filter: blur(3px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  background: rgba(255, 255, 255, 0.15);

  /* Glass distortion - realistic refraction */
  filter: url(#glass-distortion);
}

/* Liquid Glass: Shine layer - glass highlights */
.card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  z-index: 1;
  pointer-events: none;

  /* Inset highlights for glass shine effect */
  box-shadow:
    inset 2px 2px 1px 0 rgba(255, 255, 255, 0.4),
    inset -1px -1px 1px 1px rgba(255, 255, 255, 0.3);
}

/* Ensure content appears above glass layers */
.card > * {
  position: relative;
  z-index: 2;
}

/* ============================================================================
   ETCHED GLASS TEXT EFFECT
   ============================================================================ */

/* All text within glass cards - simple frosted appearance */
.card h1,
.card h2,
.card h3,
.card h4,
.card h5,
.card h6,
.card p,
.card a,
.card span,
.card li {
  /* Semi-transparent white text */
  color: rgba(255, 255, 255, 0.7) !important;

  /* Smooth rendering */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ============================================================================
   MOTION LAYER
   Implements: Physics-Based Easing, Dynamic Lighting, Shadow Casting
   ============================================================================ */

/* No hover effects - glass always rests on fur */

/* Album artwork frame effect */
.velvet-artwork-frame {
  box-shadow:
    /* Deep inset creates impression of artwork pressed into glass */
    inset 0 0 0 1px rgba(0, 0, 0, 0.9),
    inset 0 4px 16px rgba(0, 0, 0, 0.6),
    inset 0 0 50px rgba(0, 0, 0, 0.3),

    /* Subtle outer frame */
    0 0 0 1px rgba(255, 255, 255, 0.04);
}

/* Vinyl artwork with transparency - no background, preserve transparency */
.vinyl-artwork {
  background: transparent !important;
  /* No box shadow to maintain clean vinyl record aesthetic */
  box-shadow: none;
  /* Smooth edges for PNG transparency */
  image-rendering: crisp-edges;
  -webkit-image-rendering: crisp-edges;
}

/* Vinyl card - affects fur like glass cards, but without glassmorphic styling */
.vinyl-card {
  /* Remove glassmorphic effects */
  background: transparent !important;
  box-shadow: none !important;
}

/* Remove glass blur and shine layers from vinyl cards */
.vinyl-card::before,
.vinyl-card::after {
  display: none !important;
}

} /* End @layer components */

/* Override box-shadows outside @layer for proper specificity */
.card {
  /* Liquid Glass: Floating on wool */
  box-shadow:
    0 6px 12px rgba(0, 0, 0, 0.15),
    0 0 20px rgba(0, 0, 0, 0.08);

  transition:
    transform 1.2s cubic-bezier(0.22, 0.61, 0.36, 1),
    box-shadow 1s cubic-bezier(0.22, 0.61, 0.36, 1),
    backdrop-filter 1s ease-out,
    border-image 1s ease-out,
    background 1s ease-out;
}

/* No hover effects */

/* Vinyl card overrides - must come after .card rules for proper specificity */
.vinyl-card {
  background: transparent !important;
  /* Keep the same drop shadow as glass cards for floating effect */
  box-shadow:
    0 6px 12px rgba(0, 0, 0, 0.15),
    0 0 20px rgba(0, 0, 0, 0.08) !important;
}

.vinyl-card::before,
.vinyl-card::after {
  content: none !important;
  display: none !important;
}

/* Ensure the image itself has no background */
.vinyl-card img,
.vinyl-artwork {
  background: transparent !important;
}

/* ============================================================================
   HEADER AND FOOTER GLASSMORPHIC STYLING
   Match the card glass effects but without rounded corners
   ============================================================================ */

body > header {
  position: relative;
  isolation: isolate;
  overflow: hidden;

  /* Remove rounded corners */
  border-radius: 0 !important;

  /* Remove side borders - only edges touching window */
  border-left: none !important;
  border-right: none !important;
}

/* Glass blur layer for header */
body > header::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 0;

  /* Match card glass blur */
  backdrop-filter: blur(3px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  background: rgba(255, 255, 255, 0.15);

  /* Glass distortion - realistic refraction */
  filter: url(#glass-distortion);
}

/* Glass shine layer for header */
body > header::after {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;

  /* Inset highlights for glass shine effect */
  box-shadow:
    inset 2px 2px 1px 0 rgba(255, 255, 255, 0.4),
    inset -1px -1px 1px 1px rgba(255, 255, 255, 0.3);
}

/* Ensure header content appears above glass layers */
body > header > * {
  position: relative;
  z-index: 2;
}

/* Footer glassmorphic styling */
body > footer {
  position: relative;
  isolation: isolate;
}

